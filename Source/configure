#! /bin/bash

# 
# # warning message due to the compilation discrepencies between branches
# RED='\033[0;31m' # red printing
# NC='\033[0m' # no color
# BOLD=$(tput bold) # bold printing
# NF=$(tput sgr0) # no format
# printf "${RED}${BOLD}WARNING${RED}: this branch uses ${BOLD}ocamlbuild${RED} which may fail if you have leftover compilation files from other branches. In which case, run the cleaner generated by ocamlbuild after failing (${BOLD}_build/sanitize.sh${RED}).${NC}\n"

# getting configuration data
VERSION="1.0alpha"
GITCOMMIT=$(head -n 1 <(git rev-parse HEAD 2>/dev/null))
GITBRANCH=$(git branch | grep \* | cut -d ' ' -f2)

# generating the config.ml file
sed -e "s/VERSION/${VERSION}/g" -e "s/GITCOMMIT/${GITCOMMIT}/g" -e "s/GITBRANCH/${GITBRANCH}/g" < Source/core_library/config.ml.in > Source/core_library/config.ml
