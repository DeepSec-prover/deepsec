free c.
fun mac/2.
free a,b.

let A =
  in(c,x);
  (
    new k;
    new k;
    !^2 in(c,y); if y = x then out(c,ka) else out(c,b)
  ).

let sys = A.

query session_equiv(sys,sys). // equivalent
